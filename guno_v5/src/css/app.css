/* =========================
   GUNO v5 Layout (No-scroll 3 panes)
   左：dashboard（縦貫通）
   右上：slots
   右下：map
   ========================= */

:root{
  --header-h: 82px;             /* ヘッダー実高さに合わせて調整 */
  --gap: 8px;
  --radius: 10px;

  /* 左右比率（右は固定じゃなく比率で） */
  --left: 1.05fr;
  --right: 1fr;

  /* 右の上下比率 */
  --right-top: 0.52fr;          /* slots */
  --right-bottom: 0.48fr;       /* map */
}

html, body { height: 100%; }
body{
  overflow: hidden;              /* ページ全体スクロール禁止 */
}

/* 3パネルをグリッド配置 */
.game-container{
  display: grid;
  grid-template-columns: var(--left) var(--right);
  grid-template-rows: var(--right-top) var(--right-bottom);
  gap: var(--gap);

  height: calc(100dvh - var(--header-h) - 24px); /* body paddingの分を見込む */
  max-height: calc(100dvh - var(--header-h) - 24px);

  align-items: stretch;
}

/* パネル共通：縮められるように */
.panel{
  min-width: 0;
  min-height: 0;
  border-radius: var(--radius);
  overflow: hidden;              /* スクロールを出さずに収める方針 */
}

/* 左：dashboard 縦貫通 */
.panel-dashboard{
  grid-column: 1;
  grid-row: 1 / 3;
  display: flex;
  flex-direction: column;
}

/* dashboard内部もスクロールさせない（溢れは縮小＆クリップ） */
#players-area{
  min-height: 0;
  overflow: hidden;
}

/* 右上：slots */
.panel-slots{
  grid-column: 2;
  grid-row: 1;
  overflow: hidden;
}
#slots-area{
  min-height: 0;
  overflow: hidden;
}

/* 右下：map */
.panel-map{
  grid-column: 2;
  grid-row: 2;
  overflow: hidden;
}
#map{
  width: 100%;
  height: 100%;
  min-height: 0;
}

/* =========================
   “収める”ためのサイズ調整
   ========================= */

/* スマホ/狭幅はカードを小さめにして溢れを防ぐ */
@media (max-width: 1023px){
  :root{
    --header-h: 76px;
    --gap: 6px;

    /* 右を少し広めにして「スロット＋地図」を見やすく */
    --left: 1fr;
    --right: 1.05fr;

    /* 右は地図をちょい優先（好みで逆でもOK） */
    --right-top: 0.48fr;
    --right-bottom: 0.52fr;
  }

  body{ padding: 10px; }

  /* 収まり重視でカード縮小 */
  :root{
    --card-w: clamp(34px, 6.2vw, 56px);
    --card-h: calc(var(--card-w) * 1.5);
    --card-gap: 6px;
  }

  /* dashboardの文字も少し詰める */
  .player-box small{ font-size: 11px; }
}

/* 超小型（縦持ち）で右が細すぎる場合だけ、右を少し広げる */
@media (max-width: 420px){
  :root{
    --left: 0.95fr;
    --right: 1.15fr;
  }
}