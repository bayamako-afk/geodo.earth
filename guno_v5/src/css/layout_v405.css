/* =========================================
   layout_v405.css (FINAL CLEAN STABLE)
   - bodyは触らない
   - 余白はgame-containerへ
   - Mobile: header + statusBarはfixed
   - PC: 3列安定版
========================================= */

/* ===== Base ===== */
:root{
  --bg:#0b0b0b;
  --panel:#131313;
  --line:#2a2a2a;
  --txt:#eaeaea;

  --card-w: clamp(60px, 5vw, 92px);
  --card-h: calc(var(--card-w) * 1.5);
}

*{ box-sizing:border-box; }

html,body{
  margin:0;
  padding:0;
}

body{
  font-family:"Helvetica Neue",Arial,sans-serif;
  background:var(--bg);
  color:var(--txt);
  overflow-x:hidden;
  overflow-y:auto;
}

/* ===== Header ===== */
.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  background:#0f0f0f;
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 14px;
}

/* ===== Status Bar ===== */
.status-bar{
  margin:6px 10px 8px 10px;
  padding:8px 12px;
  border-radius:10px;
  background:#141a14;
  border:1px dashed #3ddc84;
  color:#8cffb0;
  font-weight:600;
}

/* ===== Panels ===== */
.panel{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px;
  min-height:0;
}

.panel-map{
  position:relative;
  display:flex;
  flex-direction:column;
  min-height:0;
}

/* ===== Game container ===== */
.game-container{
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:10px;
}

/* ===== Map (mobile default) ===== */
#map{
  height:34vh;
  min-height:240px;
  width:100%;
  border-radius:12px;
  flex:1 1 auto;
  min-height:0;
}

/* ===== PC Layout ===== */
@media (min-width:1024px){

  body > .header{
    position:static;
    margin:10px 10px 0 10px;
  }

  .game-container{
    display:grid;
    grid-template-columns:1fr 1fr 1fr;
    gap:10px;
    height:calc(100dvh - 16px);
    align-items:stretch;
    padding:10px;
  }

  .game-container > .panel{
    display:flex;
    flex-direction:column;
    height:100%;
    min-height:0;
  }

  #players-area,
  #slots-area{
    flex:1 1 auto;
    overflow:auto;
    min-height:0;
  }

  #map{
    flex:1 1 auto !important;
    height:auto !important;
    min-height:0 !important;
  }

  /* タイトルずれ対策 */
  .header{
    align-items:flex-start;
  }
  .header h2{
    margin:0;
    line-height:1.05;
  }
  .header small{
    display:block;
    margin-top:2px;
    line-height:1.05;
  }
}

/* ===== Mobile Top Bars ===== */
@media (max-width:1023px){

  body > .header{
    position:fixed;
    top:0;
    left:0;
    right:0;
    z-index:10000;
    border-radius:0;
  }

  #statusBar{
    position:fixed;
    left:0;
    right:0;
    z-index:9999;
    border-radius:0;
    margin:0;
  }
}

/* ===== Utility ===== */
.hidden{ display:none !important; }